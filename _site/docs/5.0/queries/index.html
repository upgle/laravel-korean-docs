<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>쿼리빌더(Query Builder)</title>
  <meta name="description" content="라라벨 한글 메뉴얼에 대한 메뉴얼 페이지입니다.">

  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <script src="/laravel-korean-docs/js/prism.js"></script>

  <link rel="stylesheet" href="/laravel-korean-docs/css/layout.css">
  <link rel="canonical" href="http://www.xpressengine.com/laravel-korean-docs/docs/5.0/queries/">
</head>


  <body>

    <div class="container">
    <header>
        <div class="wrap">
            <h1 class="logo">Laravel korean docs <small>laravel 한글 매뉴얼</small></h1>
            <div class="btn_area">
                <a class="button" href="https://github.com/xpressengine/laravel-korean-docs/tree/kr-5.0/kr">View on Github</a>
                <a class="button" href="https://github.com/xpressengine/laravel-korean-docs/archive/kr-5.0.zip">Download.zip</a>
                <a class="button" href="https://github.com/xpressengine/laravel-korean-docs.git">Git Repository</a>
            </div>
        </div>
    </header>
    <div class="supported">
        <div class="wrap">
            <a class="bnr" href="http://www.xpressengine.com"><img src="/laravel-korean-docs/img/bnr1.png" /></a><a class="bnr" href="http://dev.naver.com/d2"><img src="/laravel-korean-docs/img/bnr2.png" /></a><a class="bnr" href="http://xpressengine.github.io/XEIcon/"><img src="/laravel-korean-docs/img/bnr3.png" /></a><a class="bnr" href="http://xpressengine.github.io/Composer-korean-docs/"><img src="/laravel-korean-docs/img/bnr4.png" /></a><a class="bnr" href="http://laravel.com/"><img src="/laravel-korean-docs/img/bnr5.png" /></a>
        </div>
    </div>
    <div class="body docs">
        <div class="wrap">
            <section class="sidebar">
            <ul>
    <li>Prologue
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/upgrade">업그레이드 가이드</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/contributions">기여 가이드</a></li>
        </ul>
    </li>
    <li>Setup
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/installation">설치하기</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/configuration">설정</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/homestead">라라벨 홈스테드</a></li>
        </ul>
    </li>
    <li>The Basics
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/routing">HTTP 라우팅</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/middleware">HTTP 미들웨어</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/controllers">HTTP 컨트롤러</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/requests">Requests</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/responses">Responses</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/views">뷰-Views</a></li>
        </ul>
    </li>
    <li>Architecture Foundations
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/providers">서비스 프로바이더</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/container">서비스 컨테이너</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/contracts">Contracts</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/facades">파사드</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/lifecycle">라이프사이클</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/structure">어플리케이션 구조</a></li>
        </ul>
    </li>
    <li>Services
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/authentication">인증</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/billing">라라벨 캐셔</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/cache">캐시</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/collections">컬렉션</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/bus">커맨드 버스</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/extending">프레임워크의 확장</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/elixir">라라벨 엘릭서</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/encryption">암호화</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/envoy">Envoy</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/errors">에러와 로깅</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/events">이벤트</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/filesystem">파일시스템 / 클라우드 스토리지</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/hashing">해시</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/helpers">헬퍼 함수</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/localization">지역화-다국어</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/mail">메일</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/packages">패키지 개발</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/pagination">페이지네이션</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/queues">큐</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/session">세션</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/templates">템플릿</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/testing">테스팅</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/validation">Validation</a></li>
        </ul>
    </li>
    <li>Database
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/database">기본적인 데이터 베이스 사용법</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/queries">쿼리 빌더</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/eloquent">Eloquent ORM</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/schema">스키마 빌더</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/migrations">마이그레이션과 시딩</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/redis">Redis</a></li>
        </ul>
    </li>
    <li>Artisan CLI
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/artisan">아티즌 CLI</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/commands">아티즌 명령어 개발하기</a></li>
        </ul>
    </li>
</ul>
            </section>

      <article class="content">
      <h1 id="쿼리빌더(query-builder)">쿼리빌더(Query Builder)</h1>

<ul>
<li><a href="#introduction">소개</a></li>
<li><a href="#selects">Selects-선택</a></li>
<li><a href="#joins">Joins-조인</a></li>
<li><a href="#advanced-wheres">Advanced Wheres-복잡한 조건문</a></li>
<li><a href="#aggregates">Aggregates-집계문</a></li>
<li><a href="#raw-expressions">Raw Expressions-직접질의</a></li>
<li><a href="#inserts">Inserts-삽입</a></li>
<li><a href="#updates">Updates-수정</a></li>
<li><a href="#deletes">Deletes-삭제</a></li>
<li><a href="#unions">Unions-쿼리 결합</a></li>
<li><a href="#pessimistic-locking">Pessimistic Locking-배타적 잠금</a></li>
</ul>

<p><a name="introduction"></a></p>

<h2 id="소개">소개</h2>

<p>데이터베이스 쿼리 빌더는 데이터베이스 쿼리들을 만들고 운영하는데 다양한 인터페이스의 편의기능를 제공합니다. 여러분들의 어플리케이션에서 운영하는 대부분의 데이터베이스 시스템에서 잘 작동합니다.</p>

<blockquote>
<p><strong>참고:</strong> 라라벨의 쿼리 빌더는 PDO 파라미터 바인딩을 사용하여 SQL injection 공격을 방지합니다. 따라서 쿼리에 바인딩할 문자열들을 따로 정리하고 전달할 필요가 없습니다.</p>
</blockquote>

<p><a name="selects"></a></p>

<h2 id="selects">Selects</h2>

<h4 id="한-테이블에서-모든-행들을-가져오기">한 테이블에서 모든 행들을 가져오기</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">$users = DB::table(&#39;users&#39;)-&gt;get();

foreach ($users as $user)
{
    var_dump($user-&gt;name);
}
</code></pre></div>
<h4 id="테이블-결과-데이터-분할">테이블 결과 데이터 분할</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::table(&#39;users&#39;)-&gt;chunk(100, function($users)
{
    foreach ($users as $user)
    {
        //
    }
});
</code></pre></div>
<p><code>Closure</code>에서 <code>false</code> 를 반환하여 결과 분할을 중단 할 수 있습니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::table(&#39;users&#39;)-&gt;chunk(100, function($users)
{
    //

    return false;
});
</code></pre></div>
<h4 id="테이블에서-하나의-결과-가져오기">테이블에서 하나의 결과 가져오기</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">$user = DB::table(&#39;users&#39;)-&gt;where(&#39;name&#39;, &#39;John&#39;)-&gt;first();

var_dump($user-&gt;name);
</code></pre></div>
<h4 id="한개의-행에서-하나의-컬럼만을-가져오기">한개의 행에서 하나의 컬럼만을 가져오기</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">$name = DB::table(&#39;users&#39;)-&gt;where(&#39;name&#39;, &#39;John&#39;)-&gt;pluck(&#39;name&#39;);
</code></pre></div>
<h4 id="컬럼-값들의-리스트를-가져오기">컬럼 값들의 리스트를 가져오기</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">$roles = DB::table(&#39;roles&#39;)-&gt;lists(&#39;title&#39;);
</code></pre></div>
<p>이 메소드는 role 테이블의 title들의 배열을 반환할 것입니다. 반환되는 배열에 특정 키의 컬럼을 지정할 수도 있습니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$roles = DB::table(&#39;roles&#39;)-&gt;lists(&#39;title&#39;, &#39;name&#39;);
</code></pre></div>
<h4 id="select문-지정하기">Select문 지정하기</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">$users = DB::table(&#39;users&#39;)-&gt;select(&#39;name&#39;, &#39;email&#39;)-&gt;get();

$users = DB::table(&#39;users&#39;)-&gt;distinct()-&gt;get();

$users = DB::table(&#39;users&#39;)-&gt;select(&#39;name as user_name&#39;)-&gt;get();
</code></pre></div>
<h4 id="이미-있는-쿼리에-select-문-추가하기">이미 있는 쿼리에 select 문 추가하기</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">$query = DB::table(&#39;users&#39;)-&gt;select(&#39;name&#39;);

$users = $query-&gt;addSelect(&#39;age&#39;)-&gt;get();
</code></pre></div>
<h4 id="where-구문-사용">Where 구문 사용</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">$users = DB::table(&#39;users&#39;)-&gt;where(&#39;votes&#39;, &#39;&gt;&#39;, 100)-&gt;get();
</code></pre></div>
<h4 id="or-구문">Or 구문</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">$users = DB::table(&#39;users&#39;)
                    -&gt;where(&#39;votes&#39;, &#39;&gt;&#39;, 100)
                    -&gt;orWhere(&#39;name&#39;, &#39;John&#39;)
                    -&gt;get();
</code></pre></div>
<h4 id="wherebetween-사용">WhereBetween 사용</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">$users = DB::table(&#39;users&#39;)
                    -&gt;whereBetween(&#39;votes&#39;, [1, 100])-&gt;get();
</code></pre></div>
<h4 id="wherenotbetween-사용하기">WhereNotBetween 사용하기</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">$users = DB::table(&#39;users&#39;)
                    -&gt;whereNotBetween(&#39;votes&#39;, [1, 100])-&gt;get();
</code></pre></div>
<h4 id="배열로-wherein-사용하기">배열로 whereIn 사용하기</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">$users = DB::table(&#39;users&#39;)
                    -&gt;whereIn(&#39;id&#39;, [1, 2, 3])-&gt;get();

$users = DB::table(&#39;users&#39;)
                    -&gt;whereNotIn(&#39;id&#39;, [1, 2, 3])-&gt;get();
</code></pre></div>
<h4 id="값이-설정되지-않은-레코드를-찾는데-wherenull-사용하기">값이 설정되지 않은 레코드를 찾는데 whereNull 사용하기</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">$users = DB::table(&#39;users&#39;)
                    -&gt;whereNull(&#39;updated_at&#39;)-&gt;get();
</code></pre></div>
<h4 id="동적-where-구문">동적 where 구문</h4>

<p>매직 매소드를 사용하여 where 구문을 동적으로 구성할 수도 있습니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$admin = DB::table(&#39;users&#39;)-&gt;whereId(1)-&gt;first();

$john = DB::table(&#39;users&#39;)
                    -&gt;whereIdAndEmail(2, &#39;john@doe.com&#39;)
                    -&gt;first();

$jane = DB::table(&#39;users&#39;)
                    -&gt;whereNameOrAge(&#39;Jane&#39;, 22)
                    -&gt;first();
</code></pre></div>
<h4 id="order-by,-group-by,-and-having">Order By, Group By, And Having</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">$users = DB::table(&#39;users&#39;)
                    -&gt;orderBy(&#39;name&#39;, &#39;desc&#39;)
                    -&gt;groupBy(&#39;count&#39;)
                    -&gt;having(&#39;count&#39;, &#39;&gt;&#39;, 100)
                    -&gt;get();
</code></pre></div>
<h4 id="offset-&amp;-limit">Offset &amp; Limit</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">$users = DB::table(&#39;users&#39;)-&gt;skip(10)-&gt;take(5)-&gt;get();
</code></pre></div>
<p><a name="joins"></a></p>

<h2 id="joins">Joins</h2>

<p>쿼리 빌더를 사용해서 조인문(join statement)을 만들수 있습니다. 다음 예들을 살펴봅시다:</p>

<h4 id="기본적인-join문">기본적인 Join문</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::table(&#39;users&#39;)
            -&gt;join(&#39;contacts&#39;, &#39;users.id&#39;, &#39;=&#39;, &#39;contacts.user_id&#39;)
            -&gt;join(&#39;orders&#39;, &#39;users.id&#39;, &#39;=&#39;, &#39;orders.user_id&#39;)
            -&gt;select(&#39;users.id&#39;, &#39;contacts.phone&#39;, &#39;orders.price&#39;)
            -&gt;get();
</code></pre></div>
<h4 id="left-join-구문">Left Join 구문</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::table(&#39;users&#39;)
        -&gt;leftJoin(&#39;posts&#39;, &#39;users.id&#39;, &#39;=&#39;, &#39;posts.user_id&#39;)
        -&gt;get();
</code></pre></div>
<p>더 복잡한 join도 지정할 수 있습니다. </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::table(&#39;users&#39;)
        -&gt;join(&#39;contacts&#39;, function($join)
        {
            $join-&gt;on(&#39;users.id&#39;, &#39;=&#39;, &#39;contacts.user_id&#39;)-&gt;orOn(...);
        })
        -&gt;get();
</code></pre></div>
<p>조인문에서 &quot;where”구문을 사용하고 싶으면 <code>where</code>과 <code>orwhere</code> 메소드를 사용하십시오. 이러한 메소드는 두개의 컬럼을 비교 대신에 주어진 값과 컬럼을 비교합니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::table(&#39;users&#39;)
        -&gt;join(&#39;contacts&#39;, function($join)
        {
            $join-&gt;on(&#39;users.id&#39;, &#39;=&#39;, &#39;contacts.user_id&#39;)
                 -&gt;where(&#39;contacts.user_id&#39;, &#39;&gt;&#39;, 5);
        })
        -&gt;get();
</code></pre></div>
<p><a name="advanced-wheres"></a></p>

<h2 id="advanced-wheres-더-복잡한-조건문">Advanced Wheres 더 복잡한 조건문</h2>

<h4 id="parameter-grouping">Parameter Grouping</h4>

<p>가끔은 “where exists”나 중첩된 파라미터 그루핑과 같이 복잡한 조건문을 사용해야 할 필요가 있습니다. 라라벨의 쿼리 빌더는 다음과 같이 사용할 수 있습니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::table(&#39;users&#39;)
            -&gt;where(&#39;name&#39;, &#39;=&#39;, &#39;John&#39;)
            -&gt;orWhere(function($query)
            {
                $query-&gt;where(&#39;votes&#39;, &#39;&gt;&#39;, 100)
                      -&gt;where(&#39;title&#39;, &#39;&lt;&gt;&#39;, &#39;Admin&#39;);
            })
            -&gt;get();
</code></pre></div>
<p>위의 쿼리는 다음과 같은 SQL을 생성합니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">select * from users where name = &#39;John&#39; or (votes &gt; 100 and title &lt;&gt; &#39;Admin&#39;)
</code></pre></div>
<h4 id="exist-구문">Exist 구문</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::table(&#39;users&#39;)
            -&gt;whereExists(function($query)
            {
                $query-&gt;select(DB::raw(1))
                      -&gt;from(&#39;orders&#39;)
                      -&gt;whereRaw(&#39;orders.user_id = users.id&#39;);
            })
            -&gt;get();
</code></pre></div>
<p>위의 쿼리는 다음과 같은 SQL을 생성합니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">select * from users
where exists (
    select 1 from orders where orders.user_id = users.id
)
</code></pre></div>
<p><a name="aggregates"></a></p>

<h2 id="aggregates-집계">Aggregates 집계</h2>

<p>쿼리 빌더는 또한 <code>count</code>, <code>max</code>, <code>min</code>, <code>avg</code>, 그리고<code>sum</code>과 같은 집계를 위한 메소드들을 제공하고 있습니다. </p>

<h4 id="집계를-위한-메소드-사용하기">집계를 위한 메소드 사용하기</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">$users = DB::table(&#39;users&#39;)-&gt;count();

$price = DB::table(&#39;orders&#39;)-&gt;max(&#39;price&#39;);

$price = DB::table(&#39;orders&#39;)-&gt;min(&#39;price&#39;);

$price = DB::table(&#39;orders&#39;)-&gt;avg(&#39;price&#39;);

$total = DB::table(&#39;users&#39;)-&gt;sum(&#39;votes&#39;);
</code></pre></div>
<p><a name="raw-expressions"></a></p>

<h2 id="직접-질의구문">직접 질의구문</h2>

<p>때때로 직적쿼리를 생성하여 사용할 필요가 있을수도 있습니다. 이러한 구문은 문자열이 쿼리에 그대로 삽입되기 때문에 SQL 인젝션 공격에 주의해야합니다. 직접 질의 구문을 생성하기 위해서는 <code>DB::raw</code> 메소드를 사용하면 됩니다:</p>

<h4 id="직접-질의-구문-사용하기">직접 질의 구문 사용하기</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">$users = DB::table(&#39;users&#39;)
                     -&gt;select(DB::raw(&#39;count(*) as user_count, status&#39;))
                     -&gt;where(&#39;status&#39;, &#39;&lt;&gt;&#39;, 1)
                     -&gt;groupBy(&#39;status&#39;)
                     -&gt;get();
</code></pre></div>
<p><a name="inserts"></a></p>

<h2 id="inserts">Inserts</h2>

<h4 id="테이블에-새로운-레코드-추가하기">테이블에 새로운 레코드 추가하기</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::table(&#39;users&#39;)-&gt;insert(
    [&#39;email&#39; =&gt; &#39;john@example.com&#39;, &#39;votes&#39; =&gt; 0]
);
</code></pre></div>
<h4 id="auto-incrementing-id-방식-테이블에-레코드-추가하기">Auto-Incrementing ID 방식 테이블에 레코드 추가하기</h4>

<p>테이블에 auto-incrementing id 가 있다면 <code>insertGetId</code> 를 사용하여 레코드를 추가하고 ID를 얻을 수 있습니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$id = DB::table(&#39;users&#39;)-&gt;insertGetId(
    [&#39;email&#39; =&gt; &#39;john@example.com&#39;, &#39;votes&#39; =&gt; 0]
);
</code></pre></div>
<blockquote>
<p><strong>주의:</strong> PostgreSQL에 insertGetId 메소드를 사용하는 경우에는 auto-incrementing 컬럼의 이름을 &quot;id&quot;로 지정하십시오.</p>
</blockquote>

<h4 id="한번에-여러-레코드들을-추가하기">한번에 여러 레코드들을 추가하기</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::table(&#39;users&#39;)-&gt;insert([
    [&#39;email&#39; =&gt; &#39;taylor@example.com&#39;, &#39;votes&#39; =&gt; 0],
    [&#39;email&#39; =&gt; &#39;dayle@example.com&#39;, &#39;votes&#39; =&gt; 0]
]);
</code></pre></div>
<p><a name="updates"></a></p>

<h2 id="updates">Updates</h2>

<h4 id="한-테이블에-레코드들-업데이트하기">한 테이블에 레코드들 업데이트하기</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::table(&#39;users&#39;)
            -&gt;where(&#39;id&#39;, 1)
            -&gt;update([&#39;votes&#39; =&gt; 1]);
</code></pre></div>
<h4 id="컬럼값의-증가-또는-감소">컬럼값의 증가 또는 감소</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::table(&#39;users&#39;)-&gt;increment(&#39;votes&#39;);

DB::table(&#39;users&#39;)-&gt;increment(&#39;votes&#39;, 5);

DB::table(&#39;users&#39;)-&gt;decrement(&#39;votes&#39;);

DB::table(&#39;users&#39;)-&gt;decrement(&#39;votes&#39;, 5);
</code></pre></div>
<p>또한 업데이트할 추가적인 컬럼을 지정할 수도 있습니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::table(&#39;users&#39;)-&gt;increment(&#39;votes&#39;, 1, [&#39;name&#39; =&gt; &#39;John&#39;]);
</code></pre></div>
<p><a name="deletes"></a></p>

<h2 id="deletes">Deletes</h2>

<h4 id="테이블에서-레코드-하나-삭제하기">테이블에서 레코드 하나 삭제하기</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::table(&#39;users&#39;)-&gt;where(&#39;votes&#39;, &#39;&lt;&#39;, 100)-&gt;delete();
</code></pre></div>
<h4 id="테이블에서-전체-레코드-삭제하기">테이블에서 전체 레코드 삭제하기</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::table(&#39;users&#39;)-&gt;delete();
</code></pre></div>
<h4 id="테이블-비우기">테이블 비우기</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::table(&#39;users&#39;)-&gt;truncate();
</code></pre></div>
<p><a name="unions"></a></p>

<h2 id="unions">Unions</h2>

<p>쿼리 빌더는 두 개의 쿼리를 결합 “union”하는 간편한 방법을 제공합니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$first = DB::table(&#39;users&#39;)-&gt;whereNull(&#39;first_name&#39;);

$users = DB::table(&#39;users&#39;)-&gt;whereNull(&#39;last_name&#39;)-&gt;union($first)-&gt;get();
</code></pre></div>
<p><code>unionAll</code> 메소드도 사용가능하며 <code>union</code>과 동일하게 사용합니다.</p>

<p><a name="pessimistic-locking"></a></p>

<h2 id="pessimistic-locking-배타적-잠금">Pessimistic Locking 배타적 잠금</h2>

<p>쿼리빌더는 여러분이 SELECT 구문에 “Pessimistic Locking-배타적 잠금” 설정을 할 수 있도록 도와주는몇가지 기능을 포함하고 있습니다. </p>

<p>“shared lock” 에서 SELECT 문을 실행하려면 <code>sharedLock</code> 메소드를 쿼리에 지정하십시오:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::table(&#39;users&#39;)-&gt;where(&#39;votes&#39;, &#39;&gt;&#39;, 100)-&gt;sharedLock()-&gt;get();
</code></pre></div>
<p>SELECT문을 &quot;lock for update&quot; 하려면 <code>lockForUpdate</code> 메소드를 쿼리에 지정하십시오:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::table(&#39;users&#39;)-&gt;where(&#39;votes&#39;, &#39;&gt;&#39;, 100)-&gt;lockForUpdate()-&gt;get();
</code></pre></div>
      </article>

    
        </div>
    </div>
</div>
<script>
$('p a[name]').each(function(){
  var name = $(this).attr('name');
  $(this).parent().next('h2').wrapInner('<a name=' + name + '></a>');
  $(this).parent().remove();
});
$('code[class=language-text]').each(function(){
	$(this).removeClass('language-text').addClass('language-php');
});
</script>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
  var pageTracker = _gat._getTracker("UA-46389165-7");
pageTracker._trackPageview();
} catch(err) {}
</script>

  </body>

</html>
