<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>기본적인 데이터 베이스 사용법(Basic Database Usage)</title>
  <meta name="description" content="라라벨 한글 메뉴얼에 대한 메뉴얼 페이지입니다.">

  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <script src="/laravel-korean-docs/js/prism.js"></script>

  <link rel="stylesheet" href="/laravel-korean-docs/css/layout.css">
  <link rel="canonical" href="http://www.xpressengine.com/laravel-korean-docs/docs/5.0/database/">
</head>


  <body>

    <div class="container">
    <header>
        <div class="wrap">
            <h1 class="logo">Laravel korean docs <small>laravel 한글 매뉴얼</small></h1>
            <div class="btn_area">
                <a class="button" href="https://github.com/xpressengine/laravel-korean-docs/tree/kr-5.0/kr">View on Github</a>
                <a class="button" href="https://github.com/xpressengine/laravel-korean-docs/archive/kr-5.0.zip">Download.zip</a>
                <a class="button" href="https://github.com/xpressengine/laravel-korean-docs.git">Git Repository</a>
            </div>
        </div>
    </header>
    <div class="supported">
        <div class="wrap">
            <a class="bnr" href="http://www.xpressengine.com"><img src="/laravel-korean-docs/img/bnr1.png" /></a><a class="bnr" href="http://dev.naver.com/d2"><img src="/laravel-korean-docs/img/bnr2.png" /></a><a class="bnr" href="http://xpressengine.github.io/XEIcon/"><img src="/laravel-korean-docs/img/bnr3.png" /></a><a class="bnr" href="http://xpressengine.github.io/Composer-korean-docs/"><img src="/laravel-korean-docs/img/bnr4.png" /></a><a class="bnr" href="http://laravel.com/"><img src="/laravel-korean-docs/img/bnr5.png" /></a>
        </div>
    </div>
    <div class="body docs">
        <div class="wrap">
            <section class="sidebar">
            <ul>
    <li>Prologue
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/upgrade">업그레이드 가이드</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/contributions">기여 가이드</a></li>
        </ul>
    </li>
    <li>Setup
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/installation">설치하기</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/configuration">설정</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/homestead">라라벨 홈스테드</a></li>
        </ul>
    </li>
    <li>The Basics
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/routing">HTTP 라우팅</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/middleware">HTTP 미들웨어</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/controllers">HTTP 컨트롤러</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/requests">Requests</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/responses">Responses</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/views">뷰-Views</a></li>
        </ul>
    </li>
    <li>Architecture Foundations
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/providers">서비스 프로바이더</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/container">서비스 컨테이너</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/contracts">Contracts</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/facades">파사드</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/lifecycle">라이프사이클</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/structure">어플리케이션 구조</a></li>
        </ul>
    </li>
    <li>Services
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/authentication">인증</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/billing">라라벨 캐셔</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/cache">캐시</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/collections">컬렉션</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/bus">커맨드 버스</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/extending">프레임워크의 확장</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/elixir">라라벨 엘릭서</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/encryption">암호화</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/envoy">Envoy</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/errors">에러와 로깅</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/events">이벤트</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/filesystem">파일시스템 / 클라우드 스토리지</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/hashing">해시</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/helpers">헬퍼 함수</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/localization">지역화-다국어</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/mail">메일</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/packages">패키지 개발</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/pagination">페이지네이션</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/queues">큐</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/session">세션</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/templates">템플릿</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/testing">테스팅</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/validation">Validation</a></li>
        </ul>
    </li>
    <li>Database
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/database">기본적인 데이터 베이스 사용법</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/queries">쿼리 빌더</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/eloquent">Eloquent ORM</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/schema">스키마 빌더</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/migrations">마이그레이션과 시딩</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/redis">Redis</a></li>
        </ul>
    </li>
    <li>Artisan CLI
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/artisan">아티즌 CLI</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/commands">아티즌 명령어 개발하기</a></li>
        </ul>
    </li>
</ul>
            </section>

      <article class="content">
      <h1 id="기본적인-데이터-베이스-사용법(basic-database-usage)">기본적인 데이터 베이스 사용법(Basic Database Usage)</h1>

<ul>
<li><a href="#configuration">설정하기</a></li>
<li><a href="#read-write-connections">읽기용 / 쓰기용 커넥션</a></li>
<li><a href="#running-queries">쿼리 실행</a></li>
<li><a href="#database-transactions">데이터베이스 트랜잭션</a></li>
<li><a href="#accessing-connections">커넥션 엑세스</a></li>
<li><a href="#query-logging">쿼리 로깅</a></li>
</ul>

<p><a name="configuration"></a></p>

<h2 id="설정하기">설정하기</h2>

<p>라라벨은 데이터베이스 연결과 쿼리 사용을 매우 쉽게 만들어줍니다. 데이터베이스 설정 파일은 <code>config/database.php</code> 입니다. 이 파일에서 모든 데이터베이스 커넥션에 대한 설정을 정의하고 기본적으로 사용할 커넥션을 지정할 수 있습니다. 이 파일에서는 모든 지원하는 데이터베이스 예제가 들어 있습니다. </p>

<p>현재 라라벨이 지원하는 데이터베이스 시스템은 : MySQL, Postgres, SQLite 그리고 SQL Server 입니다. </p>

<p><a name="read-write-connections"></a></p>

<h2 id="읽기용-/-쓰기용-커넥션">읽기용 / 쓰기용 커넥션</h2>

<p>SELECT문에서 사용하는 데이터베이스와 INSERT, UPDATE 그리고 DELETE문을 사용하는 데이터 베이스에 다른 연결을 사용할고 싶은 경우도 있습니다. Raw 쿼리를 사용하든, 쿼리 빌더 또는 Eloquent ORM 을 사용하든 적절한 연결들을 사용할 수 있습니다. </p>

<p>다음은 어떻게 read / write 커넥션을 설정하는지에 대한 예제 입니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&#39;mysql&#39; =&gt; [
    &#39;read&#39; =&gt; [
        &#39;host&#39; =&gt; &#39;192.168.1.1&#39;,
    ],
    &#39;write&#39; =&gt; [
        &#39;host&#39; =&gt; &#39;196.168.1.2&#39;
    ],
    &#39;driver&#39;    =&gt; &#39;mysql&#39;,
    &#39;database&#39;  =&gt; &#39;database&#39;,
    &#39;username&#39;  =&gt; &#39;root&#39;,
    &#39;password&#39;  =&gt; &#39;&#39;,
    &#39;charset&#39;   =&gt; &#39;utf8&#39;,
    &#39;collation&#39; =&gt; &#39;utf8_unicode_ci&#39;,
    &#39;prefix&#39;    =&gt; &#39;&#39;,
],
</code></pre></div>
<p>설정 배열에 <code>read</code> 와 <code>write</code> 두개의 키가 추가 된것을 참고하십시오. 이 키들은 <code>host</code>라는 싱글 키를 포함하는 배열 값을 갖는다: <code>read</code>와 <code>write</code> 연결에대한 나머지 데이터베이스 옵션들은 기본 <code>mysql</code> 배열에서 합쳐(merge)집니다. 따라서 메인 배열값들 중에서 재정의하고자하는 것들만 <code>read</code>와 <code>write</code> 배열에서 입력하면 됩니다. 위의 경우에서는 <code>192.168.1.1</code> 호스트는 “read” 커넥션에서 사용되고, <code>192.168.1.2</code> 호스트는 “write” 커넥션에서 사용되어 집니다. 메인 <code>mysql</code>설정 배열에 포함된 데이터베이스 연결정보, 프리픽스, 캐릭터 셋 등 다른 모든 옵션들은 양쪽연결에서 모두 공유합니다 .</p>

<p><a name="running-queries"></a></p>

<h2 id="쿼리-실행">쿼리 실행</h2>

<p>일단 데이터베이스 연결을 설정하면 <code>DB</code> 파사드를 사용해서 쿼리를 실행 할 수 있습니다. </p>

<h4 id="select-쿼리-실행하기">Select 쿼리 실행하기</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">$results = DB::select(&#39;select * from users where id = ?&#39;, [1]);
</code></pre></div>
<p><code>select</code> 메소드는 항상 결과를 <code>배열</code>로 반환합니다. </p>

<p>또한 named 바인딩을 사용한 쿼리를 실행할 수도 있습니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$results = DB::select(&#39;select * from users where id = :id&#39;, [&#39;id&#39; =&gt; 1]);
</code></pre></div>
<h4 id="insert문-실행">Insert문 실행</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::insert(&#39;insert into users (id, name) values (?, ?)&#39;, [1, &#39;Dayle&#39;]);
</code></pre></div>
<h4 id="update문-실행">Update문 실행</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::update(&#39;update users set votes = 100 where name = ?&#39;, [&#39;John&#39;]);
</code></pre></div>
<h4 id="delete문-실행">Delete문 실행</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::delete(&#39;delete from users&#39;);
</code></pre></div>
<blockquote>
<p><strong>참고:</strong> <code>update</code>와 <code>delete</code>문은 해당 작업이 영향을 끼친 행(row)의 수를 반환합니다. </p>
</blockquote>

<h4 id="일반적인-sql문-실행">일반적인 SQL문 실행</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::statement(&#39;drop table users&#39;);
</code></pre></div>
<h4 id="쿼리-이벤트-받기">쿼리 이벤트 받기</h4>

<p><code>DB::listen</code> 메소드를 사용하여 쿼리 이벤트를 받을 수 있습니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::listen(function($sql, $bindings, $time)
{
    //
});
</code></pre></div>
<p><a name="database-transactions"></a></p>

<h2 id="데이터베이스-트랜잭션">데이터베이스 트랜잭션</h2>

<p>일련의 작업들을 하나의 데이터베이스 트랜잭션으로 실행할때 <code>transaction</code>메소드를 사용하면 됩니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::transaction(function()
{
    DB::table(&#39;users&#39;)-&gt;update([&#39;votes&#39; =&gt; 1]);

    DB::table(&#39;posts&#39;)-&gt;delete();
});
</code></pre></div>
<blockquote>
<p><strong>참고:</strong> <code>transaction</code> 메소드에 넘겨진 클로저에 어떤 예외가 발생한 경우 자동으로 트랜잭션을 롤백시킵니다.</p>
</blockquote>

<p>때로는 트랜잭션을 직접 시작해야하는 경우도 있습니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::beginTransaction();
</code></pre></div>
<p><code>rollback</code>메소드로 트랜잭션을 롤백 할 수 있습니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::rollback();
</code></pre></div>
<p>마찬가지로, <code>commit</code>메소드로 트랜잭션을 commit할 수 있습니다.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::commit();
</code></pre></div>
<p><a name="accessing-connections"></a></p>

<h2 id="커넥션-엑세스">커넥션 엑세스</h2>

<p>여러 연결들을 사용할때 <code>DB::connection</code>메소드를 통해 특정 커넥션에 액세스 할 수 있습니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$users = DB::connection(&#39;foo&#39;)-&gt;select(...);
</code></pre></div>
<p>또한 PDO 인스턴스로 액세스 할 수 있습니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$pdo = DB::connection()-&gt;getPdo();
</code></pre></div>
<p>때로는 주어진 데이터데이스에 다시 연결해야 할 수도 있습니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::reconnect(&#39;foo&#39;);
</code></pre></div>
<p>PDO인스턴스의 <code>max_connections</code>한계를 넘어서서 데이터베이스 연결을 끊어야하는경우 <code>disconnect</code>메소드를 사용하면 됩니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::disconnect(&#39;foo&#39;);
</code></pre></div>
<p><a name="query-logging"></a></p>

<h2 id="쿼리-로깅">쿼리 로깅</h2>

<p>라라벨은 선택적으로 현재 요청에 대해서 실행되는 모든 쿼리를 메모리에 로깅할 수 있습니다. 다수의 행을 삽입 하는 경우와 어플리케이션이 그 과도한 메모리를 사용할 수 있다는 점을 유의해야합니다. 로깅을 활성화 하기 위해서는 <code>enableQueryLog</code> 메소드를 사용하면 됩니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">DB::connection()-&gt;enableQueryLog();
</code></pre></div>
<p>실행된 쿼리들의 배열을 얻으려면 <code>getQueryLog</code>메소드를 사용하면 됩니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$queries = DB::getQueryLog();
</code></pre></div>
      </article>

    
        </div>
    </div>
</div>
<script>
$('p a[name]').each(function(){
  var name = $(this).attr('name');
  $(this).parent().next('h2').wrapInner('<a name=' + name + '></a>');
  $(this).parent().remove();
});
$('code[class=language-text]').each(function(){
	$(this).removeClass('language-text').addClass('language-php');
});
</script>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
  var pageTracker = _gat._getTracker("UA-46389165-7");
pageTracker._trackPageview();
} catch(err) {}
</script>

  </body>

</html>
