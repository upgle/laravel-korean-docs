<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>테스팅(Testing)</title>
  <meta name="description" content="라라벨 한글 메뉴얼에 대한 메뉴얼 페이지입니다.">

  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <script src="/laravel-korean-docs/js/prism.js"></script>

  <link rel="stylesheet" href="/laravel-korean-docs/css/layout.css">
  <link rel="canonical" href="http://www.xpressengine.com/laravel-korean-docs/docs/5.0/testing/">
</head>


  <body>

    <div class="container">
    <header>
        <div class="wrap">
            <h1 class="logo">Laravel korean docs <small>laravel 한글 매뉴얼</small></h1>
            <div class="btn_area">
                <a class="button" href="https://github.com/xpressengine/laravel-korean-docs/tree/kr-5.0/kr">View on Github</a>
                <a class="button" href="https://github.com/xpressengine/laravel-korean-docs/archive/kr-5.0.zip">Download.zip</a>
                <a class="button" href="https://github.com/xpressengine/laravel-korean-docs.git">Git Repository</a>
            </div>
        </div>
    </header>
    <div class="supported">
        <div class="wrap">
            <a class="bnr" href="http://www.xpressengine.com"><img src="/laravel-korean-docs/img/bnr1.png" /></a><a class="bnr" href="http://dev.naver.com/d2"><img src="/laravel-korean-docs/img/bnr2.png" /></a><a class="bnr" href="http://xpressengine.github.io/XEIcon/"><img src="/laravel-korean-docs/img/bnr3.png" /></a><a class="bnr" href="http://xpressengine.github.io/Composer-korean-docs/"><img src="/laravel-korean-docs/img/bnr4.png" /></a><a class="bnr" href="http://laravel.com/"><img src="/laravel-korean-docs/img/bnr5.png" /></a>
        </div>
    </div>
    <div class="body docs">
        <div class="wrap">
            <section class="sidebar">
            <ul>
    <li>Prologue
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/upgrade">업그레이드 가이드</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/contributions">기여 가이드</a></li>
        </ul>
    </li>
    <li>Setup
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/installation">설치하기</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/configuration">설정</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/homestead">라라벨 홈스테드</a></li>
        </ul>
    </li>
    <li>The Basics
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/routing">HTTP 라우팅</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/middleware">HTTP 미들웨어</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/controllers">HTTP 컨트롤러</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/requests">Requests</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/responses">Responses</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/views">뷰-Views</a></li>
        </ul>
    </li>
    <li>Architecture Foundations
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/providers">서비스 프로바이더</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/container">서비스 컨테이너</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/contracts">Contracts</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/facades">파사드</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/lifecycle">라이프사이클</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/structure">어플리케이션 구조</a></li>
        </ul>
    </li>
    <li>Services
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/authentication">인증</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/billing">라라벨 캐셔</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/cache">캐시</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/collections">컬렉션</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/bus">커맨드 버스</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/extending">프레임워크의 확장</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/elixir">라라벨 엘릭서</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/encryption">암호화</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/envoy">Envoy</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/errors">에러와 로깅</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/events">이벤트</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/filesystem">파일시스템 / 클라우드 스토리지</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/hashing">해시</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/helpers">헬퍼 함수</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/localization">지역화-다국어</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/mail">메일</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/packages">패키지 개발</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/pagination">페이지네이션</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/queues">큐</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/session">세션</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/templates">템플릿</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/testing">테스팅</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/validation">Validation</a></li>
        </ul>
    </li>
    <li>Database
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/database">기본적인 데이터 베이스 사용법</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/queries">쿼리 빌더</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/eloquent">Eloquent ORM</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/schema">스키마 빌더</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/migrations">마이그레이션과 시딩</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/redis">Redis</a></li>
        </ul>
    </li>
    <li>Artisan CLI
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/artisan">아티즌 CLI</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/commands">아티즌 명령어 개발하기</a></li>
        </ul>
    </li>
</ul>
            </section>

      <article class="content">
      <h1 id="테스팅(testing)">테스팅(Testing)</h1>

<ul>
<li><a href="#introduction">소개</a></li>
<li><a href="#defining-and-running-tests">테스팅 정의와 실행하기</a></li>
<li><a href="#test-environment">테스트 환경</a></li>
<li><a href="#calling-routes-from-tests">테스트에서 라우트 호출하기</a></li>
<li><a href="#mocking-facades">파사드 Mocking</a></li>
<li><a href="#framework-assertions">프레임워크 Assertions</a></li>
<li><a href="#helper-methods">헬퍼 메소드</a></li>
<li><a href="#refreshing-the-application">어플리케이션 새로 고침</a></li>
</ul>

<p><a name="introduction"></a></p>

<h2 id="소개">소개</h2>

<p>라라벨은 단위 테스트를 고려하여 구성되어 있습니다. 실제로는 PHPUnit을 통한 테스팅이 별다른 설정 없이도 지원되며 어플리케이션을 위한 <code>phpunit.xml</code> 파일이  이미 설정되어 있습니다. </p>

<p><code>tests</code> 디렉토리에는 테스트 예제 파일이 제공되어 있습니다. 새롭게 라라벨 어플리케이션을 설치한 후 커맨드 라인에서 그대로 <code>phpunit</code> 명령어를 실행하면 테스트를 수행할 수 있습니다. </p>

<p><a name="defining-and-running-tests"></a></p>

<h2 id="테스트-정의-&amp;-실행하기">테스트 정의 &amp; 실행하기</h2>

<p>테스트 케이스를 만들기 위해서는 <code>tests</code> 디렉토리에 새로운 테스트 파일을 작성하면 됩니다. 테스트 클래스는 <code>TestCase</code> 클래스를 상속받아야 합니다. 여러분은 PHPUnit을 사용할 때와 마찬가지로 테스트 메소드를 정의 하면 됩니다. </p>

<h4 id="테스트-클래스의-예제">테스트 클래스의 예제</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">class FooTest extends TestCase {

    public function testSomethingIsTrue()
    {
        $this-&gt;assertTrue(true);
    }

}
</code></pre></div>
<p>터미널에서 <code>phpunit</code> 명령어를 실행함으로써 어플리케이션의 모든 테스트를 실행할 수 있습니다. </p>

<blockquote>
<p><strong>참고</strong> 여러분이 <code>setUp</code> 메소드를 정의했다면 <code>parent::setUp</code> 을 호출하는 것을 확인하십시오. </p>
</blockquote>

<p><a name="test-environment"></a></p>

<h2 id="테스트-환경">테스트 환경</h2>

<p>단위 테스트를 실행할 때 라라벨은 자동으로 설정 환경을 <code>testing</code>에 구성해 놓습니다. 또한 라라벨은 테스트 환경에서의 <code>session</code> 과 <code>cache</code>을 위한 설정 파일들을 포함하고 있습니다. 이 두개의 드라이버는 테스트 환경에서 <code>array</code> 로 설정되며 세션 또는 캐시 데이터는 테스팅이 진행되는 동안에만 존재한다는 것을 의미합니다. 여러분은 필요한 경우에 자유롭게 테스트 환경 설정을 만들 수 있습니다. </p>

<p><code>testing</code> 환경 변수는 <code>phpunit.xml</code> 파일에 설정되어 있습니다.</p>

<p><a name="calling-routes-from-tests"></a></p>

<h2 id="테스트에서-라우트-호출하기">테스트에서 라우트 호출하기</h2>

<h4 id="테스트에서-라우트-호출하기">테스트에서 라우트 호출하기</h4>

<p>여러분은 테스트에서 <code>call</code> 메소르들 사용하여 손쉽게 라우트를 호출할 수 있습니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$response = $this-&gt;call(&#39;GET&#39;, &#39;user/profile&#39;);

$response = $this-&gt;call($method, $uri, $parameters, $cookies, $files, $server, $content);
</code></pre></div>
<p>그리고 <code>Illuminate\Http\Response</code> 객체를 확인하면 됩니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$this-&gt;assertEquals(&#39;Hello World&#39;, $response-&gt;getContent());
</code></pre></div>
<h4 id="테스트에서-컨트롤러-호출하기">테스트에서 컨트롤러 호출하기</h4>

<p>또한 테스트에서 컨트롤러를 호출할 수도 있습니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$response = $this-&gt;action(&#39;GET&#39;, &#39;HomeController@index&#39;);

$response = $this-&gt;action(&#39;GET&#39;, &#39;UserController@profile&#39;, [&#39;user&#39; =&gt; 1]);
</code></pre></div>
<blockquote>
<p><strong>주의</strong> <code>action</code> 메소드를 사용할 경우에 여러분은 컨트롤러의 전체 네임스페이스를 지정할 필요가 없습니다. <code>App\Http\Controllers</code> 네임 스페이스에 뒤에 붙게 되는 클래스 이름만 지정하면 됩니다. </p>
</blockquote>

<p><code>getContent</code> 메소드는 응답을 통해 얻어지는 문자열을 반환합니다. 여러분의 라우트가 <code>View</code>를 반환하는 경우 <code>original</code> 속성을 사용하여 뷰에 액세스 할 수 있습니다.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$view = $response-&gt;original;

$this-&gt;assertEquals(&#39;John&#39;, $view[&#39;name&#39;]);
</code></pre></div>
<p>HTTPS 라우트를 호출하기 위해서는 <code>callSecure</code> 메소드를 사용하면 됩니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$response = $this-&gt;callSecure(&#39;GET&#39;, &#39;foo/bar&#39;);
</code></pre></div>
<p><a name="mocking-facades"></a></p>

<h2 id="파사드-mocking">파사드 Mocking</h2>

<p>테스트를 진행할 때 여러분은 종종 라라벨의 static 파사드를 Mock 하기를 원할 수도 있습니다. 예를 들어 다음의 컨트롤러 액션의 경우를 생각해 보겠습니다. </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">public function getIndex()
{
    Event::fire(&#39;foo&#39;, [&#39;name&#39; =&gt; &#39;Dayle&#39;]);

    return &#39;All done!&#39;;
}
</code></pre></div>
<p>파사드에 <code>shouldReceive</code> 메소드를 사용하여 <code>Event</code> 클래스의 호출을 Mock 할 수 있으며 이것은 <a href="https://github.com/padraic/mockery">Mockery</a> mock 인스턴스를 반환할 것입니다. </p>

<h4 id="파사드-mocking">파사드 Mocking</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">public function testGetIndex()
{
    Event::shouldReceive(&#39;fire&#39;)-&gt;once()-&gt;with(&#39;foo&#39;, [&#39;name&#39; =&gt; &#39;Dayle&#39;]);

    $this-&gt;call(&#39;GET&#39;, &#39;/&#39;);
}
</code></pre></div>
<blockquote>
<p><strong>주의</strong> <code>Request</code> 파사드를 mock 해서는 안됩니다. 대신에 테스트를 수행할 때 <code>call</code> 메소드에 원하는 입력을 전달하십시오. </p>
</blockquote>

<p><a name="framework-assertions"></a></p>

<h2 id="프레임워크-assertions">프레임워크 Assertions</h2>

<p>라라벨은 테스트를 돕기 위해서 몇 가지 <code>assert</code> 메소드가 준비되어 있습니다:</p>

<h4 id="응답이-제대로-이루어졌는지-assert">응답이 제대로 이루어졌는지 assert</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">public function testMethod()
{
    $this-&gt;call(&#39;GET&#39;, &#39;/&#39;);

    $this-&gt;assertResponseOk();
}
</code></pre></div>
<h4 id="응답-코드-assert">응답 코드 assert</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">$this-&gt;assertResponseStatus(403);
</code></pre></div>
<h4 id="응답이-리다이렉션인지-assert">응답이 리다이렉션인지 assert</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">$this-&gt;assertRedirectedTo(&#39;foo&#39;);

$this-&gt;assertRedirectedToRoute(&#39;route.name&#39;);

$this-&gt;assertRedirectedToAction(&#39;Controller@method&#39;);
</code></pre></div>
<h4 id="뷰가-가지는-데이터에-대한-assert">뷰가 가지는 데이터에 대한 assert</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">public function testMethod()
{
    $this-&gt;call(&#39;GET&#39;, &#39;/&#39;);

    $this-&gt;assertViewHas(&#39;name&#39;);
    $this-&gt;assertViewHas(&#39;age&#39;, $value);
}
</code></pre></div>
<h4 id="세션이-가지는-데이터에-대한-assert">세션이 가지는 데이터에 대한 assert</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">public function testMethod()
{
    $this-&gt;call(&#39;GET&#39;, &#39;/&#39;);

    $this-&gt;assertSessionHas(&#39;name&#39;);
    $this-&gt;assertSessionHas(&#39;age&#39;, $value);
}
</code></pre></div>
<h4 id="세션이-에러를-가지는지-assert">세션이 에러를 가지는지 assert</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">public function testMethod()
{
    $this-&gt;call(&#39;GET&#39;, &#39;/&#39;);

    $this-&gt;assertSessionHasErrors();

    // Asserting the session has errors for a given key...
    $this-&gt;assertSessionHasErrors(&#39;name&#39;);

    // Asserting the session has errors for several keys...
    $this-&gt;assertSessionHasErrors([&#39;name&#39;, &#39;age&#39;]);
}
</code></pre></div>
<h4 id="지난-입력값에-대한-assert">지난 입력값에 대한 assert</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">public function testMethod()
{
    $this-&gt;call(&#39;GET&#39;, &#39;/&#39;);

    $this-&gt;assertHasOldInput();
}
</code></pre></div>
<p><a name="helper-methods"></a></p>

<h2 id="헬퍼-메소드">헬퍼 메소드</h2>

<p><code>TestCase</code> 클래스는 어플리케이션의 테스팅을 돕기 위한 몇가지의 헬퍼 메소드를 포함하고 있습니다. </p>

<h4 id="테스트에서-세션을-설정하고-비우기">테스트에서 세션을 설정하고 비우기</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">$this-&gt;session([&#39;foo&#39; =&gt; &#39;bar&#39;]);

$this-&gt;flushSession();
</code></pre></div>
<h4 id="현재의-인증된-사용자를-설정하기">현재의 인증된 사용자를 설정하기</h4>

<p><code>be</code>  메소드를 사용하여 현재 인증된 사용자를 설정할 수 있습니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$user = new User([&#39;name&#39; =&gt; &#39;John&#39;]);

$this-&gt;be($user);
</code></pre></div>
<p>테스트에서 데이터베이스의 내용을 재구성하려면 <code>seed</code> 메소드를 사용하면 됩니다:</p>

<h4 id="테스트에서-데이터베이스-초기-값-설정-다시-실행">테스트에서 데이터베이스 초기 값 설정 다시 실행</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">$this-&gt;seed();

$this-&gt;seed($connection);
</code></pre></div>
<p>시드를 생성하는 데에 대한 보다 자세한 정보는 공식 문서의 <a href="/docs/migrations#database-seeding">마이그레이션 과 시딩</a> 섹션을 참고하십시오. </p>

<p><a name="refreshing-the-application"></a></p>

<h2 id="어플리케이션-새로-고침">어플리케이션 새로 고침</h2>

<p>이미 알고 있다 시피 여러분은 테스트 메소드에서 <code>$this-&gt;app</code> 을 통해서 어플리케이션(<a href="/docs/5.0/container">서비스 컨테이너</a>)에 엑세스 할 수 있습니다. 이 서비스 컨테이너 인스턴스는 각각의 테스트 클래스 마다 새로 고침됩니다. 만약 여러분이 수동으로 어플리케이션을 새로고침 하고 싶은 경우에는 테스트 메소드에서 <code>refreshApplication</code> 메소드를 사용하면 됩니다. 이렇게 하면 테스트 케이스가 실행을 시작한 이후 IoC 컨테이너에 등록된 mock 객체와 추가적인 바인딩을 재설정 할것입니다. </p>

      </article>

    
        </div>
    </div>
</div>
<script>
$('p a[name]').each(function(){
  var name = $(this).attr('name');
  $(this).parent().next('h2').wrapInner('<a name=' + name + '></a>');
  $(this).parent().remove();
});
$('code[class=language-text]').each(function(){
	$(this).removeClass('language-text').addClass('language-php');
});
</script>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
  var pageTracker = _gat._getTracker("UA-46389165-7");
pageTracker._trackPageview();
} catch(err) {}
</script>

  </body>

</html>
