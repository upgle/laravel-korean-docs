<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>이벤트(Events)</title>
  <meta name="description" content="라라벨 한글 메뉴얼에 대한 메뉴얼 페이지입니다.">

  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <script src="/laravel-korean-docs/js/prism.js"></script>

  <link rel="stylesheet" href="/laravel-korean-docs/css/layout.css">
  <link rel="canonical" href="http://www.xpressengine.com/laravel-korean-docs/docs/5.0/events/">
</head>


  <body>

    <div class="container">
    <header>
        <div class="wrap">
            <h1 class="logo">Laravel korean docs <small>laravel 한글 매뉴얼</small></h1>
            <div class="btn_area">
                <a class="button" href="https://github.com/xpressengine/laravel-korean-docs/tree/kr-5.0/kr">View on Github</a>
                <a class="button" href="https://github.com/xpressengine/laravel-korean-docs/archive/kr-5.0.zip">Download.zip</a>
                <a class="button" href="https://github.com/xpressengine/laravel-korean-docs.git">Git Repository</a>
            </div>
        </div>
    </header>
    <div class="supported">
        <div class="wrap">
            <a class="bnr" href="http://www.xpressengine.com"><img src="/laravel-korean-docs/img/bnr1.png" /></a><a class="bnr" href="http://dev.naver.com/d2"><img src="/laravel-korean-docs/img/bnr2.png" /></a><a class="bnr" href="http://xpressengine.github.io/XEIcon/"><img src="/laravel-korean-docs/img/bnr3.png" /></a><a class="bnr" href="http://xpressengine.github.io/Composer-korean-docs/"><img src="/laravel-korean-docs/img/bnr4.png" /></a><a class="bnr" href="http://laravel.com/"><img src="/laravel-korean-docs/img/bnr5.png" /></a>
        </div>
    </div>
    <div class="body docs">
        <div class="wrap">
            <section class="sidebar">
            <ul>
    <li>Prologue
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/upgrade">업그레이드 가이드</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/contributions">기여 가이드</a></li>
        </ul>
    </li>
    <li>Setup
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/installation">설치하기</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/configuration">설정</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/homestead">라라벨 홈스테드</a></li>
        </ul>
    </li>
    <li>The Basics
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/routing">HTTP 라우팅</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/middleware">HTTP 미들웨어</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/controllers">HTTP 컨트롤러</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/requests">Requests</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/responses">Responses</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/views">뷰-Views</a></li>
        </ul>
    </li>
    <li>Architecture Foundations
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/providers">서비스 프로바이더</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/container">서비스 컨테이너</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/contracts">Contracts</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/facades">파사드</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/lifecycle">라이프사이클</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/structure">어플리케이션 구조</a></li>
        </ul>
    </li>
    <li>Services
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/authentication">인증</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/billing">라라벨 캐셔</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/cache">캐시</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/collections">컬렉션</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/bus">커맨드 버스</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/extending">프레임워크의 확장</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/elixir">라라벨 엘릭서</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/encryption">암호화</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/envoy">Envoy</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/errors">에러와 로깅</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/events">이벤트</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/filesystem">파일시스템 / 클라우드 스토리지</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/hashing">해시</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/helpers">헬퍼 함수</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/localization">지역화-다국어</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/mail">메일</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/packages">패키지 개발</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/pagination">페이지네이션</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/queues">큐</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/session">세션</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/templates">템플릿</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/testing">테스팅</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/validation">Validation</a></li>
        </ul>
    </li>
    <li>Database
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/database">기본적인 데이터 베이스 사용법</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/queries">쿼리 빌더</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/eloquent">Eloquent ORM</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/schema">스키마 빌더</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/migrations">마이그레이션과 시딩</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/redis">Redis</a></li>
        </ul>
    </li>
    <li>Artisan CLI
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/artisan">아티즌 CLI</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/commands">아티즌 명령어 개발하기</a></li>
        </ul>
    </li>
</ul>
            </section>

      <article class="content">
      <h1 id="이벤트(events)">이벤트(Events)</h1>

<ul>
<li><a href="#basic-usage">기본적인 사용법</a></li>
<li><a href="#queued-event-handlers">큐에 저장된 이벤트 핸들러</a></li>
<li><a href="#event-subscribers">이벤트 구독</a></li>
</ul>

<p><a name="basic-usage"></a></p>

<h2 id="기본적인-사용법">기본적인 사용법</h2>

<p>라라벨 이벤트 기능은 어플리케이션의 이벤트를 구독하고 수신 대기 할 수 있는 관찰자(옵저버) 구현을 제공합니다. 일반적으로 이벤트 클래스는 <code>app/Events</code> 디렉토리에, 이벤트 핸들러는 <code>app/Handlers/Events</code> 디렉토리에 저장됩니다. </p>

<p>아티즌 CLI 툴을 사용해서 새로운 이벤트 클래스를 생성할 수 있습니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">php artisan make:event PodcastWasPurchased
</code></pre></div>
<h4 id="이벤트-구독하기">이벤트 구독하기</h4>

<p>라라벨 어플리케이션에 포함되어 있는 <code>EventServiceProvider</code> 는 모든 이벤트 핸들러를 등록하는 편리한 방법을 제공합니다. <code>listen</code> 프로퍼티는 이벤트(키)와 핸들러(값)으로 구성된 배열을 가지고 있습니다. 여러분의 어플리케이션에서 필요로 하는 많은 이벤트들을 이 배열에 추가할 수 있습니다. 예를 들어 <code>PodcastWasPurchased</code> 이벤트를 추가한다고 가정해 봅시다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">/**
 * The event handler mappings for the application.
 *
 * @var array
 */
protected $listen = [
    &#39;App\Events\PodcastWasPurchased&#39; =&gt; [
        &#39;App\Handlers\Events\EmailPurchaseConfirmation&#39;,
    ],
];
</code></pre></div>
<p>이벤트에 대한 핸들러를 생성하기 위해서는 아티즌 CLI 명령어 <code>handler:event</code>를 사용하십시오:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">php artisan handler:event EmailPurchaseConfirmation --event=PodcastWasPurchased
</code></pre></div>
<p>매번 핸들러나 이벤트가 필요할 때 직접 <code>make:event</code> 와 <code>handler:event</code> 명령어를 나누어 실행하는 것은 번거로운 일입니다. 대신에 <code>EventServiceProvider</code>클래스에 핸들러와 이벤트를 추가하고 <code>event:generate</code> 명령어를 사용할 수도 있습니다. 이 명령어는 여러분의 <code>EventServiceProvider</code>에 나열된 이벤트와 핸들러를 생성해줄 것입니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">php artisan event:generate
</code></pre></div>
<h4 id="이벤트-발생시키기">이벤트 발생시키기</h4>

<p>이제 <code>Event</code> 파사드를 사용해서 이벤트를 발생시킬 수 있습니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$response = Event::fire(new PodcastWasPurchased($podcast));
</code></pre></div>
<p><code>fire</code> 메소드는 어플리케이션에서 다음에 일어날 일을 제어하는 데 사용할 수 있는 배열을 반환합니다.</p>

<p>이벤트를 발생시키는데에는 <code>event</code> 핼퍼 함수를 사용할 수도 있습니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">event(new PodcastWasPurchased($podcast));
</code></pre></div>
<h4 id="클로저-리스너">클로저 리스너</h4>

<p>이벤트를 처리하기 위해서 항상 별도의 핸들러 클래스를 생성할 필요는 없습니다. 예를 들어 <code>EventServiceProvider</code>의 <code>boot</code> 메소드에서 다음처럼 지정 할 수도 있습니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">Event::listen(&#39;App\Events\PodcastWasPurchased&#39;, function($event)
{
    // Handle the event...
});
</code></pre></div>
<h4 id="이벤트-전달-중단하기">이벤트 전달 중단하기</h4>

<p>경우에 따라서 이벤트가 다른 리스너에게 전달되는 것을 중지하기를 원할 수도 있습니다. 이러한 경우에는 핸들러에서 <code>false</code> 를 리턴하면 됩니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">Event::listen(&#39;App\Events\PodcastWasPurchased&#39;, function($event)
{
    // Handle the event...

    return false;
});
</code></pre></div>
<p><a name="queued-event-handlers"></a></p>

<h2 id="큐에-저장된-이벤트-핸들러">큐에 저장된 이벤트 핸들러</h2>

<p>이벤트 핸들러에 <a href="/docs/5.0/queues">큐</a>가 필요한가요? 간단하게 할 수 있습니다. 핸들러를 생성할 때 <code>--queued</code> 플래스를 사용하면 됩니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">php artisan handler:event SendPurchaseConfirmation --event=PodcastWasPurchased --queued
</code></pre></div>
<p>이렇게 하면 핸들러 클래스는 <code>Illuminate\Contracts\Queue\ShouldBeQueued</code> 인터페이스의 구현 클래스가 됩니다. 이걸로 끝입니다! 이제 핸들러가 이벤트에 의해서 호출될 때 이벤트 디스패처에 의해서 자동으로 큐에 지정됩니다. </p>

<p>큐에 의해서 실행되는 핸들러가 아무런 예외도 발생하지 않는다면 큐로 지정된 작업은 수행후 자동으로 삭제 됩니다. 수동으로 큐로 지정된 작업의 <code>delete</code> 와 <code>release</code> 메소드에 액세스 해야되는 경우, 여러분은 그렇게 할 수도 있습니다. 큐로 지정된 핸들러에  기본적으로 포함된 <code>Illuminate\Queue\InteractsWithQueue</code> trait 이 다음의 메소드에 엑세스 할 수 있게 해줍니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">public function handle(PodcastWasPurchased $event)
{
    if (true)
    {
        $this-&gt;release(30);
    }
}
</code></pre></div>
<p>이미 생성된 핸들러를 큐로 지정된 핸들러로 변경해야 된다면 클래스에 수동으로 <code>ShouldBeQueued</code> 인터페이스 를 추가해주시면 됩니다. </p>

<p><a name="event-subscribers"></a></p>

<h2 id="이벤트-구독-클래스">이벤트 구독 클래스</h2>

<h4 id="이벤트-구독-클래스-정의하기">이벤트 구독 클래스 정의하기</h4>

<p>이벤트 구독 클래스는 많은 이벤트를 하나의 클래스 자체에서 구독하기 위한 클래스 입니다. 구독 클래스는 이벤트 디스패처 인스턴스가 전달되는 <code>subscribe</code> 메소드를 정의해야 합니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">class UserEventHandler {

    /**
     * Handle user login events.
     */
    public function onUserLogin($event)
    {
        //
    }

    /**
     * Handle user logout events.
     */
    public function onUserLogout($event)
    {
        //
    }

    /**
     * Register the listeners for the subscriber.
     *
     * @param  Illuminate\Events\Dispatcher  $events
     * @return array
     */
    public function subscribe($events)
    {
        $events-&gt;listen(&#39;App\Events\UserLoggedIn&#39;, &#39;UserEventHandler@onUserLogin&#39;);

        $events-&gt;listen(&#39;App\Events\UserLoggedOut&#39;, &#39;UserEventHandler@onUserLogout&#39;);
    }

}
</code></pre></div>
<h4 id="이벤트-구독-클래스-등록하기">이벤트 구독 클래스 등록하기</h4>

<p>이벤트 구독 클래스를 정의하고 나면, <code>Event</code> 클래스에 등록하면 됩니다. </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$subscriber = new UserEventHandler;

Event::subscribe($subscriber);
</code></pre></div>
<p>서비스 컨테이너를 통해서 구독 클래스의 의존성 해결을 사용할 수 있습니다. 이 경우 간단하게 <code>subscribe</code> 메소드에 클래스 이름만 넣으면 됩니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">Event::subscribe(&#39;UserEventHandler&#39;);
</code></pre></div>
      </article>

    
        </div>
    </div>
</div>
<script>
$('p a[name]').each(function(){
  var name = $(this).attr('name');
  $(this).parent().next('h2').wrapInner('<a name=' + name + '></a>');
  $(this).parent().remove();
});
$('code[class=language-text]').each(function(){
	$(this).removeClass('language-text').addClass('language-php');
});
</script>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
  var pageTracker = _gat._getTracker("UA-46389165-7");
pageTracker._trackPageview();
} catch(err) {}
</script>

  </body>

</html>
