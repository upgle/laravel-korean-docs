<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>마이그레이션 & 시딩(Migrations & Seeding)</title>
  <meta name="description" content="라라벨 한글 메뉴얼에 대한 메뉴얼 페이지입니다.">

  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <script src="/laravel-korean-docs/js/prism.js"></script>

  <link rel="stylesheet" href="/laravel-korean-docs/css/layout.css">
  <link rel="canonical" href="http://www.xpressengine.com/laravel-korean-docs/docs/5.0/migrations/">
</head>


  <body>

    <div class="container">
    <header>
        <div class="wrap">
            <h1 class="logo"><a href="/laravel-korean-docs/">Laravel korean docs <small>laravel 한글 매뉴얼</small></a></h1>
            <div class="btn_area">
                <a class="button" href="https://github.com/xpressengine/laravel-korean-docs/tree/kr-5.0/kr">View on Github</a>
                <a class="button" href="https://github.com/xpressengine/laravel-korean-docs/archive/kr-5.0.zip">Download.zip</a>
                <a class="button" href="https://github.com/xpressengine/laravel-korean-docs.git">Git Repository</a>
            </div>
        </div>
    </header>
    <div class="supported">
        <div class="wrap">
            <a class="bnr" href="http://www.xpressengine.com"><img src="/laravel-korean-docs/img/bnr1.png" /></a><a class="bnr" href="http://dev.naver.com/d2"><img src="/laravel-korean-docs/img/bnr2.png" /></a><a class="bnr" href="http://xpressengine.github.io/XEIcon/"><img src="/laravel-korean-docs/img/bnr3.png" /></a><a class="bnr" href="http://xpressengine.github.io/Composer-korean-docs/"><img src="/laravel-korean-docs/img/bnr4.png" /></a><a class="bnr" href="http://laravel.com/"><img src="/laravel-korean-docs/img/bnr5.png" /></a>
        </div>
    </div>
    <div class="body docs">
        <div class="wrap">
            <section class="sidebar">
            <ul>
    <li>Prologue
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/upgrade">업그레이드 가이드</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/contributions">기여 가이드</a></li>
        </ul>
    </li>
    <li>Setup
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/installation">설치하기</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/configuration">설정</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/homestead">라라벨 홈스테드</a></li>
        </ul>
    </li>
    <li>The Basics
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/routing">HTTP 라우팅</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/middleware">HTTP 미들웨어</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/controllers">HTTP 컨트롤러</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/requests">Requests</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/responses">Responses</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/views">뷰-Views</a></li>
        </ul>
    </li>
    <li>Architecture Foundations
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/providers">서비스 프로바이더</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/container">서비스 컨테이너</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/contracts">Contracts</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/facades">파사드</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/lifecycle">라이프사이클</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/structure">어플리케이션 구조</a></li>
        </ul>
    </li>
    <li>Services
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/authentication">인증</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/billing">라라벨 캐셔</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/cache">캐시</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/collections">컬렉션</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/bus">커맨드 버스</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/extending">프레임워크의 확장</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/elixir">라라벨 엘릭서</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/encryption">암호화</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/envoy">Envoy</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/errors">에러와 로깅</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/events">이벤트</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/filesystem">파일시스템 / 클라우드 스토리지</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/hashing">해시</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/helpers">헬퍼 함수</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/localization">지역화-다국어</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/mail">메일</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/packages">패키지 개발</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/pagination">페이지네이션</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/queues">큐</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/session">세션</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/templates">템플릿</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/testing">테스팅</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/validation">Validation</a></li>
        </ul>
    </li>
    <li>Database
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/database">기본적인 데이터 베이스 사용법</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/queries">쿼리 빌더</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/eloquent">Eloquent ORM</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/schema">스키마 빌더</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/migrations">마이그레이션과 시딩</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/redis">Redis</a></li>
        </ul>
    </li>
    <li>Artisan CLI
        <ul>
            <li><a href="/laravel-korean-docs/docs/5.0/artisan">아티즌 CLI</a></li>
            <li><a href="/laravel-korean-docs/docs/5.0/commands">아티즌 명령어 개발하기</a></li>
        </ul>
    </li>
</ul>
            </section>

      <article class="content">
      <h1 id="마이그레이션-&amp;-시딩(migrations-&amp;-seeding)">마이그레이션 &amp; 시딩(Migrations &amp; Seeding)</h1>

<ul>
<li><a href="#introduction">소개</a></li>
<li><a href="#creating-migrations">마이그레이션 생성하기</a></li>
<li><a href="#running-migrations">마이그레이션 실행하기</a></li>
<li><a href="#rolling-back-migrations">마이그레이션 롤백하기</a></li>
<li><a href="#database-seeding">데이터베이스 시딩(초기값 입력하기)</a></li>
</ul>

<p><a name="introduction"></a></p>

<h2 id="소개">소개</h2>

<p>마이그레이션은 데이터베이스용 버전 컨트롤러의 일종입니다. 마이그레이션은 여러분의 팀이 데이터베이스 스키마를 수정하고 현재의 스키마 상태를 유지할 수 있도록 해줍니다. 마이그레이션은 일반적으로 어플리케이션의 스키마를 쉽게 관리할 수 있는 <a href="/docs/5.0/schema">스키마 빌더</a> 와 함께 사용되어 집니다.</p>

<p><a name="creating-migrations"></a></p>

<h2 id="마이그레이션-생성하기">마이그레이션 생성하기</h2>

<p>마이그레이션을 생성하기 위해서는 <code>make:migration</code>아티즌 CLI 명령어를 사용합니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">php artisan make:migration create_users_table
</code></pre></div>
<p>마이그레이션 파일들은 <code>database/migrations</code> 폴더에 저장되고 프레임워크가 마이그레이션의 순서를 알 수 있도록 타임스탬프를 포함하고 있습니다. </p>

<p><code>--table</code>과 <code>--create</code>옵션은 테이블의 이름과 마이그레이션하면서 새 테이블을 만들것인지를 결정하는데 사용할 수 있습니다.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">php artisan make:migration add_votes_to_users_table --table=users

php artisan make:migration create_users_table --create=users
</code></pre></div>
<p><a name="running-migrations"></a></p>

<h2 id="마이그레이션-실행하기">마이그레이션 실행하기</h2>

<h4 id="실행되지-않은-전체-마이그레이션-실행">실행되지 않은 전체 마이그레이션 실행</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">php artisan migrate
</code></pre></div>
<blockquote>
<p><strong>참고 :</strong> 마이그레이션 실행시 &quot;class not found&quot; 에러 메세지가 출력된다면 <code>composer dump-autoload</code> 명령어를 실행해보십시오. </p>
</blockquote>

<h3 id="실제-제품-서버에서-강제로-마이그레이션-실행하기">실제 제품 서버에서 강제로 마이그레이션 실행하기</h3>

<p>일부의 마이그레이션 작업은 구조 변경이 있을 수 있으며 이로 인해 데이터를 잃을 수도 있습니다. 이러한 위험들로 부터 실제 제품 서버의 데이터베이스를 보호하기 위해 마이그레이션 명령어를 실행하기 전에 확인 메시지가 출력됩니다. 확인 메시지 없이 명령어을 실행시키기 위해서는 <code>--force</code> 플래그를 사용하면 됩니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">php artisan migrate --force
</code></pre></div>
<p><a name="rolling-back-migrations"></a></p>

<h2 id="마이그레이션-롤백하기">마이그레이션 롤백하기</h2>

<h4 id="가장-최근의-마이그레이션-작업-롤백하기">가장 최근의 마이그레이션 작업 롤백하기</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">php artisan migrate:rollback
</code></pre></div>
<h4 id="모든-마이그레이션-작업-롤백하기">모든 마이그레이션 작업 롤백하기</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">php artisan migrate:reset
</code></pre></div>
<h4 id="모든-마이그레이션-작업을-롤백하고-다시-실행하기">모든 마이그레이션 작업을 롤백하고 다시 실행하기</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">php artisan migrate:refresh

php artisan migrate:refresh --seed
</code></pre></div>
<p><a name="database-seeding"></a></p>

<h2 id="데이터베이스-시딩">데이터베이스 시딩</h2>

<p>라라벨에서는 시드(seed) 클래스를 사용해서 테스트 데이터를 데이터베이스에 설정하는 간단한 방법을 제공합니다. 모든 시드(Seed) 클래스는 <code>database/seeds</code> 폴더에 저장됩니다. 시드(Seed)클래스의 이름은 아무렇게나 작성할 수 있지만 가급적 <code>UserTableSeeder</code>등과 같이 직관적인 이름 규칙을 따르는 것이 좋습니다. 기본값으로 <code>DatabaseSeeder</code>클래스가 정의 되어 있습니다. 이 클래스에서 <code>call</code> 메소드로 다른 시드(seed) 클래스를  호출해서 시딩(seeding) 순서를 조정 할 수 있습니다.</p>

<h4 id="데이터베이스-시드(seed)-클래스-예제">데이터베이스 시드(seed) 클래스 예제</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">class DatabaseSeeder extends Seeder {

    public function run()
    {
        $this-&gt;call(&#39;UserTableSeeder&#39;);

        $this-&gt;command-&gt;info(&#39;User table seeded!&#39;);
    }

}

class UserTableSeeder extends Seeder {

    public function run()
    {
        DB::table(&#39;users&#39;)-&gt;delete();

        User::create([&#39;email&#39; =&gt; &#39;foo@bar.com&#39;]);
    }

}
</code></pre></div>
<p>데이터베이스에 초기값을 설정(seed)하려면 <code>db:seed</code>아티즌 CLI 명령어를 사용하면 됩니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">php artisan db:seed
</code></pre></div>
<p>기본적으로 <code>db:seed</code> 명령어는 다른 시드(seed) 클래스들을 호출하는 <code>DatabaseSeeder</code>클래스를 실행합니다. 하지만 <code>--class</code>옵션을 사용해서 특정 시더(seeder) 클래스가 개별적으로 실행되도록 지정할 수 있습니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">php artisan db:seed --class=UserTableSeeder
</code></pre></div>
<p><code>migrate:refresh</code>명령어를 사용하면 데이터베이스 초기값을 설정할 때 모든 마이그레이션들을 롤백한 다음 다시 실행 할 것입니다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">php artisan migrate:refresh --seed
</code></pre></div>
      </article>

    
        </div>
    </div>
</div>
<script>
$('p a[name]').each(function(){
  var name = $(this).attr('name');
  $(this).parent().next('h2').wrapInner('<a name=' + name + '></a>');
  $(this).parent().remove();
});
$('code[class=language-text]').each(function(){
	$(this).removeClass('language-text').addClass('language-php');
});
</script>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
  var pageTracker = _gat._getTracker("UA-46389165-7");
pageTracker._trackPageview();
} catch(err) {}
</script>

  </body>

</html>
